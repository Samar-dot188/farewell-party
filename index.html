<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farewell, Teacher</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
      /* Added transition for the final zoom effect */
      transition: transform 5s ease-in-out;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
    }

    .message-container {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100vh;
      padding: 20px;
      font-size: 2em;
      line-height: 1.6;
      transition: transform 5s ease-in-out;
      color: #00ffff;
      text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #00ffff;
    }

    .balloon {
      width: 40px;
      height: 50px;
      background: red;
      border-radius: 50% 50% 45% 45%;
      position: absolute;
      bottom: -100px;
      /* Use a CSS variable for randomization */
      --random-x: calc((var(--random) - 0.5) * 200px);
      --random-rot: calc((var(--random) - 0.5) * 90deg);
      animation: float 10s ease-in-out forwards;
    }

    .tail {
      width: 2px;
      height: 30px;
      background: white;
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
    }

    @keyframes float {
      from {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      to {
        transform: translateY(-120vh) translateX(var(--random-x)) rotate(var(--random-rot));
        opacity: 0;
      }
    }

    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      top: -20px; /* Start just above the screen */
      opacity: 0;
      animation: fall-and-scatter 5s linear forwards;
    }

    @keyframes fall-and-scatter {
      from {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      to {
        transform: translateY(110vh) rotate(720deg);
        opacity: 1;
      }
    }

  </style>
</head>
<body>
  <canvas id="stars"></canvas>
  <div class="message-container" id="message"></div>

  <script>
    const messages = [
      "Dear Pooja Miss,",
      "You've taught us more than just ICT.",
      "You showed us how to think, explore, and be curious.",
      "We'll miss your jokes during class and your endless patience!",
      "From formatting Word docs...",
      "To understanding algorithms...",
      "You made computers FUN.",
      "Here's a virtual standing ovation from all of us! 👏👏👏",
      "A Heartfull guesture from us!",
      "With love, from Grade 6B 💻💙",
      "Goodbye and best wishes on your next adventure!",
      "Thank You!"
    ];

    const messageDiv = document.getElementById('message');
    let i = 0;

    function typeWriterEffect(msg, cb) {
      let j = 0;
      messageDiv.innerHTML = '';
      const interval = setInterval(() => {
        messageDiv.innerHTML = msg.slice(0, j + 1);
        j++;
        if (j >= msg.length) {
          clearInterval(interval);
          setTimeout(cb, 1200);
        }
      }, 50);
    }

    function showNextMessage() {
      if (i < messages.length) {
        typeWriterEffect(messages[i], showNextMessage);
        i++;
      } else {
        triggerCelebration();
      }
    }

    showNextMessage();

    function triggerCelebration() {
      messageDiv.style.transform = "scale(1.2)";
      launchBalloons();
      launchConfetti();

      // --- ADDED ZOOM EFFECT ---
      // After a short delay, zoom in on the entire page by 50%
      setTimeout(() => {
        document.body.style.transform = 'scale(1.5)';
      }, 1000); // Start the zoom 1 second after the celebration starts
    }

    // Starry background
    const canvas = document.getElementById("stars");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    const stars = [];
    for (let i = 0; i < 150; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.2 + 0.5,
        d: Math.random() * 0.5 + 0.05
      });
    }

    function drawStars() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "white";
      stars.forEach(star => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
        ctx.fill();
        star.y += star.d;
        if (star.y > canvas.height) {
          star.y = 0;
          star.x = Math.random() * canvas.width;
        }
      });
      requestAnimationFrame(drawStars);
    }

    drawStars();

    // Balloons
    function launchBalloons() {
      for (let i = 0; i < 25; i++) {
        const balloon = document.createElement('div');
        balloon.className = 'balloon';
        balloon.style.setProperty('--random', Math.random());
        balloon.style.left = Math.random() * window.innerWidth + 'px';
        balloon.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
        balloon.style.animationDelay = `${Math.random() * 2}s`;

        const tail = document.createElement('div');
        tail.className = 'tail';
        balloon.appendChild(tail);

        document.body.appendChild(balloon);

        setTimeout(() => {
          balloon.remove();
        }, 10000); // Clean up balloon after animation
      }
    }

    // Confetti
    function launchConfetti() {
      for (let i = 0; i < 200; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';

        // Set random properties for a better scattering effect
        confetti.style.left = `${Math.random() * 100}vw`; // horizontal start
        confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
        confetti.style.animationDuration = `${Math.random() * 3 + 4}s`; // duration
        confetti.style.animationDelay = `${Math.random() * 3}s`; // delay start

        document.body.appendChild(confetti);

        // Remove the confetti element after its animation is complete
        setTimeout(() => {
          confetti.remove();
        }, 7000); // 7s is a safe time based on max duration + delay
      }
    }
  </script>
</body>
</html>
