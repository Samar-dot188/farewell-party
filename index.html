<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Farewell Platformer</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #111;
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
    }
    canvas {
      display: block;
      background: linear-gradient(to top, #444, #222);
    }
    #message {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      font-size: 1.2em;
      color: #00ffff;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="400"></canvas>
  <div id="message"></div>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const player = {
      x: 100,
      y: 300,
      width: 30,
      height: 30,
      color: '#0ff',
      dy: 0,
      onGround: false
    };

    const keys = {};
    const gravity = 0.8;
    const jumpPower = -12;

    window.addEventListener('keydown', (e) => {
      keys[e.key] = true;
    });

    window.addEventListener('keyup', (e) => {
      keys[e.key] = false;
    });

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    function updatePlayer() {
      if (keys['ArrowLeft'] || keys['a']) player.x -= 5;
      if (keys['ArrowRight'] || keys['d']) player.x += 5;

      player.dy += gravity;
      player.y += player.dy;

      if (player.y + player.height >= canvas.height - 20) {
        player.y = canvas.height - 20 - player.height;
        player.dy = 0;
        player.onGround = true;
      } else {
        player.onGround = false;
      }

      if ((keys['ArrowUp'] || keys['w'] || keys[' ']) && player.onGround) {
        player.dy = jumpPower;
      }
    }

    function drawGround() {
      ctx.fillStyle = '#555';
      ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawGround();
      updatePlayer();
      drawPlayer();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();

    const messageText = [
      "Dear Teacher,",
      "You've taught us more than just ICT.",
      "You showed us how to think, explore, and be curious.",
      "We'll miss your jokes during class and your endless patience!",
      "From formatting Word docs...",
      "To understanding algorithms...",
      "You made computers FUN.",
      "Here‚Äôs a virtual standing ovation from all of us! üëèüëèüëè",
      "With love, from Grade 6 üíªüíô",
      "Goodbye and best wishes on your next adventure!",
      "Thank You!"
    ];

    let index = 0;
    let charIndex = 0;
    const messageBox = document.getElementById('message');

    function typeWriter() {
      if (index < messageText.length) {
        const line = messageText[index];
        if (charIndex === 0) messageBox.textContent += "\n";  // Add spacing per line

        if (charIndex < line.length) {
          messageBox.textContent += line.charAt(charIndex);
          charIndex++;
          setTimeout(typeWriter, 50);
        } else {
          charIndex = 0;
          index++;
          setTimeout(typeWriter, 800);
        }
      }
    }

    // Auto-start after 3 sec OR press 'f' to trigger
    setTimeout(() => {
      if (index === 0) typeWriter();
    }, 3000);

    window.addEventListener('keydown', (e) => {
      if (e.key === 'f' && index === 0) {
        typeWriter();
      }
    });
  </script>
</body>
</html>
